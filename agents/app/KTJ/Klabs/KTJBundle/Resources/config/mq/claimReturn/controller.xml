<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">
	<parameters>
		<parameter key="ktj.mq.auth.claim_return.login">%claim_return_login%</parameter>
		<parameter key="ktj.mq.auth.claim_return.password">%claim_return_password%</parameter>
		<parameter key="ktj.mq.auth.claim_return.machine_key">%claim_return_machine_key%</parameter>
		<parameter key="ktj.mq.report.claim_return.item.url">SeatReserve/GetTicketDocument</parameter>
		<parameter key="ktj.mq.report.claim_return.confirm.url">TicketSale/IssueOrderExternal</parameter>
		<parameter key="ktj.mq.auth.session.close.info.url">CashierWorkSession/GetStartedWorkSession</parameter>
		<parameter key="ktj.mq.report.return.reference">ReturnManagement/GetReturnReference</parameter>
		<parameter key="ktj.mq.report.ticket.status">TicketInfo/GetOrderInfo</parameter>
		<parameter key="ktj.mq.return.tickets">ReturnManagement/ReturnTickets</parameter>
		<parameter key="ktj.mq.return.defiscale">ReturnManagement/DefiscaleReturn</parameter>
		<parameter key="ktj.mq.return.finalize">ReturnManagement/ReturnFinalized</parameter>
	</parameters>
	<services>
		<service id="klabs_ktj.ktj_provider_mq_controller_express_commit.express_commit_controller.claim_return" class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\ExpressCommit\ExpressCommitController">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setCommitUrl">
				<argument>%ktj.mq.express_commit.commit.url%</argument>
			</call>
			<call method="setErrorHandler">
				<argument type="service" id="klabs.mq.error.claim_return"/>
			</call>
		</service>
		<service id="klabs_ktj.ktj_provider_mq_controller_auth.auth_controller.claim_return" class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Auth\AuthController">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setAuthUrl">
				<argument>%dcts_uri_auth%</argument>
			</call>
			<call method="setLogin">
				<argument>%ktj.mq.auth.claim_return.login%</argument>
			</call>
			<call method="setPassword">
				<argument>%ktj.mq.auth.claim_return.password%</argument>
			</call>
			<call method="setMachineKey">
				<argument>%ktj.mq.auth.claim_return.machine_key%</argument>
			</call>
		</service>
		<service id="klabs_ktj.ktj_provider_mq_controller_auth.session_controller.claim_return" class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Auth\SessionController">
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setErrorHandler">
				<argument type="service" id="klabs.mq.error.claim_return"/>
			</call>
			<call method="setOpenUri">
				<argument>%ktj.mq.auth.session.open.url%</argument>
			</call>
			<call method="setCloseUri">
				<argument>%ktj.mq.auth.session.close.url%</argument>
			</call>
			<call method="setRetryOpenUri">
				<argument>%ktj.mq.auth.session.open.retry.url%</argument>
			</call>
			<call method="setRetryCloseUri">
				<argument>%ktj.mq.auth.session.close.retry.url%</argument>
			</call>
			<call method="setInfoUri">
				<argument>%ktj.mq.auth.session.close.info.url%</argument>
			</call>
		</service>
		<service id="klabs_ktj.ktj_provider_mq_controller_report.report_controller.claim_return" class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Report\ReportController">
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setReportTicketController">
				<argument type="service" id="klabs_ktj.ktj_provider_mq_controller_report.ticket_controller.claim_return"/>
			</call>
			<call method="setReportStationController">
				<argument type="service" id="klabs_ktj.ktj_provider_mq_controller_report.station_controller.claim_return"/>
			</call>
			<call method="setWaitListController">
				<argument type="service" id="klabs_ktj.ktj_provider_mq_controller_report.wait_list_controller.claim_return"/>
			</call>
			<call method="setReportReturnController">
				<argument type="service" id="klabs_ktj.ktj_provider_mq_controller_report.return_reference.claim_return"/>
			</call>
		</service>
		<service id="klabs_ktj.ktj_provider_mq_controller_report.ticket_controller.claim_return" class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Report\TicketController">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setErrorHandler">
				<argument type="service" id="klabs.mq.error.claim_return"/>
			</call>
			<call method="setReportStatusUri">
				<argument>%mq_uri_ticket_status%</argument>
			</call>
			<call method="setReportTerminalInfoUri">
				<argument>%mq_uri_ticket_terminal_info%</argument>
			</call>
		</service>
		<service id="klabs_ktj.ktj_provider_mq_controller_report.station_controller.claim_return" class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Report\StationController">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setDataUri">
				<argument>%dcts_uri_station_list%</argument>
			</call>
		</service>
		<service id="klabs_ktj.ktj_provider_mq_controller_report.return_reference.claim_return" class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Report\ReturnController">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setReferenceUri">
				<argument>%ktj.mq.report.return.reference%</argument>
			</call>
			<call method="setOrderUri">
				<argument>%ktj.mq.report.ticket.status%</argument>
			</call>
		</service>
		<service id="klabs_ktj.ktj_provider_mq_controller_queue.queue_controller.claim_return" class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Queue\QueueController">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setErrorHandler">
				<argument type="service" id="klabs.mq.error.claim_return"/>
			</call>
			<call method="setRequestItemUrl">
				<argument>%ktj.mq.queue.request_item.url%</argument>
			</call>
			<call method="setConfirmItemUrl">
				<argument>%ktj.mq.queue.confirm_item.url%</argument>
			</call>
			<call method="setGetItemUrl">
				<argument>%ktj.mq.queue.get_item.url%</argument>
			</call>
			<call method="setConfirmBookingUrl">
				<argument>%ktj.mq.queue.confirm_booking.url%</argument>
			</call>
		</service>
		<service class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Order\OrderController" id="klabs_ktj.ktj_provider_mq_controller_order.order_controller.claim_return">
			<call method="setReserveController">
				<argument type="service" id="klabs_ktj.ktj_provider_mq_controller_order.reserve_controller.claim_return"/>
			</call>
			<call method="setConfirmController">
				<argument type="service" id="klabs_ktj.ktj_provider_mq_controller_order.confirm_controller.claim_return"/>
			</call>
			<call method="setFiscalizeController">
				<argument type="service" id="klabs_ktj.ktj_provider_mq_controller_order.fiscalize_controller.claim_return"/>
			</call>
			<call method="setFinalizeController">
				<argument type="service" id="klabs_ktj.ktj_provider_mq_controller_order.finalize_controller.claim_return"/>
			</call>
			<call method="setCancelController">
				<argument type="service" id="klabs_ktj.ktj_provider_mq_controller_order.cancel_controller.claim_return"/>
			</call>
		</service>
		<service id="klabs_ktj.ktj_provider_mq_controller_order.reserve_controller.claim_return" class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Order\ReserveController">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setErrorHandler">
				<argument type="service" id="klabs.mq.error.claim_return"/>
			</call>
			<call method="setRetryReserveUrl">
				<argument>%ktj.mq.order.reservation.retry_reserve.url%</argument>
			</call>
			<call method="setReserveUri">
				<argument>%ktj.mq.order.reservation.reserve.url%</argument>
			</call>
		</service>
		<service id="klabs_ktj.ktj_provider_mq_controller_order.confirm_controller.claim_return" class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Order\ConfirmController">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setErrorHandler">
				<argument type="service" id="klabs.mq.error.claim_return"/>
			</call>
			<call method="setRetryConfirmationUrl">
				<argument>%ktj.mq.order.reservation.retry_confirm.url%</argument>
			</call>
			<call method="setConfirmationUrl">
				<argument>%ktj.mq.order.reservation.confirm.url%</argument>
			</call>
		</service>
		<service id="klabs_ktj.ktj_provider_mq_controller_order.cancel_controller.claim_return" class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Order\CancelController">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setErrorHandler">
				<argument type="service" id="klabs.mq.error.claim_return"/>
			</call>
			<call method="setCancelUrl">
				<argument>%ktj.mq.order.reservation.cancel.url%</argument>
			</call>
			<call method="setRetryCancelUrl">
				<argument>%ktj.mq.order.reservation.retry_cancel.url%</argument>
			</call>
		</service>
		<service class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Order\FiscalizeController" id="klabs_ktj.ktj_provider_mq_controller_order.fiscalize_controller.claim_return">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setErrorHandler">
				<argument type="service" id="klabs.mq.error.claim_return"/>
			</call>
			<call method="setFiscalizeUrl">
				<argument>%ktj.mq.order.reservation.fiscalize.url%</argument>
			</call>
		</service>
		<service class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Order\FinalizeController" id="klabs_ktj.ktj_provider_mq_controller_order.finalize_controller.claim_return">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setErrorHandler">
				<argument type="service" id="klabs.mq.error.claim_return"/>
			</call>
			<call method="setFinalizeUrl">
				<argument>%ktj.mq.order.reservation.finalize.url%</argument>
			</call>
		</service>
		<service class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Report\WaitListController" id="klabs_ktj.ktj_provider_mq_controller_report.wait_list_controller.claim_return">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setErrorHandler">
				<argument type="service" id="klabs.mq.error.claim_return"/>
			</call>
			<call method="setDisplayTerminalsUrl">
				<argument>%ktj.mq.report.wait_list.list_terminals.url%</argument>
			</call>
		</service>
		<service class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\SeatReserve\SeatReserveController" id="klabs_ktj.ktj_provider_mq_controller_report.claim_return_controller.claim_return">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setErrorHandler">
				<argument type="service" id="klabs.mq.error.claim_return"/>
			</call>
			<call method="setConfirmItemUrl">
				<argument>%ktj.mq.queue.confirm_item.url%</argument>
			</call>
			<call method="setRequestItemUrl">
				<argument>%ktj.mq.report.claim_return.item.url%</argument>
			</call>
			<call method="setConfirmItemUrl">
				<argument>%ktj.mq.report.claim_return.confirm.url%</argument>
			</call>
		</service>
		<service class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Ticket\ReturnController" id="klabs_ktj.ktj_provider_mq_controller_ticket.return_controller.claim_return">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setReturnUri">
				<argument>%ktj.mq.return.tickets%</argument>
			</call>
		</service>
		<service id="klabs_ktj.ktj_provider_mq_controller_ticket.ticket_controller.claim_return" class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\Ticket\TicketController">
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setReturnController">
				<argument type="service" id="klabs_ktj.ktj_provider_mq_controller_ticket.return_controller.claim_return"/>
			</call>
		</service>
		<service class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\ReturnController\DefiscaleController" id="klabs_ktj.ktj_provider_mq_controller_return.defiscale_controller.claim_return">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setDefiscaleUri">
				<argument>%ktj.mq.return.defiscale%</argument>
			</call>
		</service>
		<service class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\ReturnController\FinalizeController" id="klabs_ktj.ktj_provider_mq_controller_return.finalize_controller.claim_return">
			<call method="setEventDispatcher">
				<argument type="service" id="event_dispatcher"/>
			</call>
			<call method="setProvider">
				<argument type="service" id="klabs_ktj.ktj_provider_mq.provider.claim_return"/>
			</call>
			<call method="setSerializer">
				<argument type="service" id="jms_serializer"/>
			</call>
			<call method="setFinalizeUri">
				<argument>%ktj.mq.return.finalize%</argument>
			</call>
		</service>
		<service class="Klabs\KTJBundle\KTJ\Provider\MQ\Controller\ReturnController\ReturnController" id="klabs_ktj.ktj_provider_mq_controller_return.return_controller.claim_return">
			<call method="setDefiscaleController">
				<argument type="service" id="klabs_ktj.ktj_provider_mq_controller_return.defiscale_controller.claim_return"/>
			</call>
			<call method="setFinalizeController">
				<argument type="service" id="klabs_ktj.ktj_provider_mq_controller_return.finalize_controller.claim_return"/>
			</call>
		</service>
	</services>
</container>
